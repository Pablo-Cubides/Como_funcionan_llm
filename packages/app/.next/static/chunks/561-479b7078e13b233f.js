"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[561],{8561:function(e,t,a){a.d(t,{ProcessProvider:function(){return c},xD:function(){return u}});var r=a(7573),o=a(7653),n=a(7792);let i={currentStep:0,inputText:"",isExplanationMode:!0,processData:null};function s(e,t){var a,r,o,s,l,c,u,d;switch(t.type){case"START_PROCESS":return{...e,currentStep:1,inputText:t.payload.text,processData:{originalText:t.payload.text,tokens:[],tokenIds:[],embeddings:[],positionalEncodings:[],combinedEmbeddings:[],attentionHeads:[],attentionWeights:[],attentionScores:[],contextVectors:[],probabilities:[],generatedTokens:[],vocabulary:[]}};case"SET_STEP":return{...e,currentStep:t.payload};case"RESTART":return{...i,isExplanationMode:e.isExplanationMode};case"TOGGLE_EXPLANATION_MODE":return{...e,isExplanationMode:!e.isExplanationMode};case"SET_PROCESS_DATA":return{...e,processData:t.payload};case"COMPUTE_EMBEDDINGS":{let{tokenIds:a,tokens:r}=t.payload,o=a.map(e=>(0,n.C6)(e,16)),i=r.map((e,t)=>(0,n.Y3)(t,16)),s=o.map((e,t)=>(0,n.Uq)(e,i[t]));return{...e,processData:e.processData?{...e.processData,embeddings:o,positionalEncodings:i,combinedEmbeddings:s}:e.processData}}case"COMPUTE_ATTENTION":{if(!(null===(a=e.processData)||void 0===a?void 0:a.combinedEmbeddings))return e;let{numHeads:o=4}=null!==(r=t.payload)&&void 0!==r?r:{},{heads:i,combinedWeights:s}=(0,n.m7)(e.processData.combinedEmbeddings,o,16);return{...e,processData:{...e.processData,attentionHeads:i,attentionWeights:s}}}case"COMPUTE_PROBABILITIES":{if(!(null===(o=e.processData)||void 0===o?void 0:o.combinedEmbeddings))return e;let{seed:a=42}=null!==(s=t.payload)&&void 0!==s?s:{},r=e.processData.vocabulary&&e.processData.vocabulary.length?e.processData.vocabulary:(0,n.ug)(),i=e.processData.combinedEmbeddings[e.processData.combinedEmbeddings.length-1],l=(0,n.zR)(i,r,a,e.processData.originalText);return{...e,processData:{...e.processData,vocabulary:r,probabilities:l}}}case"GENERATE_NEXT":{if(!e.processData)return e;let a=null!==(u=null===(l=t.payload)||void 0===l?void 0:l.strategy)&&void 0!==u?u:"greedy",r=null!==(d=null===(c=t.payload)||void 0===c?void 0:c.k)&&void 0!==d?d:5,o=e.processData.probabilities||[];if(!o.length)return e;let i="number"==typeof a?(0,n.GM)(o,a):(0,n.GM)(o,a,r),s=(e.processData.originalText||"")+" "+i,p=(0,n.mu)(e.processData,s);return{...e,processData:{...p,generatedTokens:[...e.processData.generatedTokens||[],i]}}}default:return e}}let l=(0,o.createContext)(void 0);function c(e){let{children:t}=e,[a,n]=(0,o.useReducer)(s,i);return(0,o.useEffect)(()=>{window.localStorage.removeItem("exploramodelo_state")},[]),(0,o.useEffect)(()=>{let e={currentStep:a.currentStep,inputText:a.inputText,isExplanationMode:a.isExplanationMode,processData:a.processData?{originalText:a.processData.originalText,tokens:a.processData.tokens,tokenIds:a.processData.tokenIds,generatedTokens:a.processData.generatedTokens,vocabulary:a.processData.vocabulary}:null},t=setTimeout(()=>{try{window.localStorage.setItem("exploramodelo_state",JSON.stringify(e))}catch(e){}},300);return()=>clearTimeout(t)},[a.currentStep,a.inputText,a.isExplanationMode,a.processData]),(0,r.jsx)(l.Provider,{value:{state:a,dispatch:n},children:t})}function u(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useProcess must be used within a ProcessProvider");return e}},7792:function(e,t,a){function r(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t&=t;return Math.abs(t)%1e4}function o(e){return e.replace(/\s+/g," ").trim().split(/(\s+|[.,!?;:()"'-])/).filter(e=>e.length>0&&" "!==e)}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=[];for(let r=0;r<t;r++){let t=1e4*Math.sin(e*(r+1));a.push((t-Math.floor(t))*2-1)}return a}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=[];for(let r=0;r<t;r++)r%2==0?a.push(Math.sin(e/Math.pow(1e4,r/t))):a.push(Math.cos(e/Math.pow(1e4,(r-1)/t)));return a}function s(e,t){return e.map((e,a)=>e+t[a])}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=a/t,i=[];for(let a=0;a<t;a++)i.push(function(e,t,a){let o=e.length,i=[],s=[],l=e.map(e=>n(r(e.join("")+"Q".concat(a)),t)),c=e.map(e=>n(r(e.join("")+"K".concat(a)),t));for(let e=0;e<o;e++){i[e]=[];for(let a=0;a<o;a++){let r=0;for(let o=0;o<t;o++)r+=l[e][o]*c[a][o];r/=Math.sqrt(t),a>e&&(r=-1/0),i[e][a]=r}let a=Math.max(...i[e].filter(e=>isFinite(e))),r=i[e].map(e=>isFinite(e)?Math.exp(e-a):0),n=r.reduce((e,t)=>e+t,0);s[e]=r.map(e=>n>0?e/n:0)}return{scores:i,weights:s}}(e,o,a));let s=Array(e.length).fill(0).map(()=>Array(e.length).fill(0));for(let a=0;a<e.length;a++)for(let r=0;r<e.length;r++){let e=0;for(let o=0;o<t;o++)e+=i[o].weights[a][r];s[a][r]=e/t}return{heads:i,combinedWeights:s}}function c(){return["el","la","de","que","y","es","en","un","se","no","te","lo","le","da","su","por","son","con","para","al","una","sus","del","las","como","pero","m\xe1s","muy","ya","todo","casa","vida","d\xeda","agua","tiempo","a\xf1o","trabajo","persona","hombre","mujer","ni\xf1o","pa\xeds","ciudad","mundo","lugar","momento","forma","manera","parte","problema","hacer","decir","estar","tener","llegar","pasar","deber","poner","parecer","quedar","creer","hablar","llevar","dejar","seguir","encontrar","llamar","venir","pensar","salir","volver","tomar","conocer","vivir","sentir","tratar","mirar","contar","empezar","esperar","bueno","grande","nuevo","primer","\xfaltimo","largo","peque\xf1o","mismo","mejor","mayor","propio","general","p\xfablico","cierto","poco","mucho","tanto","otro","todo","cada","bien","tambi\xe9n","aqu\xed","donde","cuando","como","tanto","mientras","seg\xfan","entre","sin","sobre","hasta","desde","durante","contra","hacia","mediante","excepto","salvo","hermano","hermana","padre","madre","hijo","hija","amigo","amiga","familia","gente","escuela","universidad","colegio","libro","mesa","silla","puerta","ventana","carro","coche","perro","gato","animal","\xe1rbol","flor","monta\xf1a","r\xedo","mar","cielo","sol","luna","estrella","noche","ma\xf1ana","tarde","hora","minuto","segundo","semana","mes","rojo","azul","verde","amarillo","negro","blanco","gris","marr\xf3n","rosa","naranja","comer","beber","dormir","caminar","correr","jugar","estudiar","trabajar","leer","escribir","m\xfasica","pel\xedcula","juego","deporte","f\xfatbol","tenis","nataci\xf3n","comida","bebida","pan","feliz","triste","contento","enojado","cansado","enfermo","sano","fuerte","d\xe9bil","r\xe1pido","inteligencia","artificial","modelo","lenguaje","algoritmo","red","neuronal","aprendizaje","profundo"]}function u(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:42,o=arguments.length>3?arguments[3]:void 0,n=[],i=[];if(o){for(let[e,t]of Object.entries({"porque tienen alas":["fuertes","ligeras","grandes","poderosas","hermosas"],"tecnolog\xeda fascinante":["que","para","con","muy","realmente"],"hacer res\xfamenes":["claros","detallados","\xfatiles","completos","efectivos"],"cien grados":["celsius","cent\xedgrados","de","y","aproximadamente"],"sabores \xfanicos":["y","que","muy","con","de"],"tus gastos":["mensuales","diarios","cuidadosamente","y","bien"],"es nadar":["porque","ya","pues","dado","y"],"la playa":["y","para","durante","con","en"],"es Barcelona":["por","debido","porque","ya","pues"],"su equipo":["hacia","a","para","con","y"]}))if(o.toLowerCase().includes(e.toLowerCase())){i=t;break}}t.forEach(t=>{let o=r(t),s=0;for(let t=0;t<e.length;t++){let r=.1*Math.sin((o+a)*(t+1));s+=e[t]*r}i.includes(t)&&(s+=2),n.push({token:t,probability:s,id:o})});let s=Math.max(...n.map(e=>e.probability)),l=n.map(e=>({...e,probability:Math.exp(e.probability-s)})),c=l.reduce((e,t)=>e+t.probability,0);return l.map(e=>({...e,probability:c>0?e.probability/c:1/l.length})).sort((e,t)=>t.probability-e.probability).slice(0,10)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"greedy",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!e||0===e.length)return"";if("number"==typeof t)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e||0===e.length)return"";t<=0&&(t=1e-6);let a=e.map(e=>({...e,score:Math.pow(e.probability,1/t)})),r=a.reduce((e,t)=>e+t.score,0);if(r<=0)return e[0].token;let o=Math.random()*r;for(let e of a)if((o-=e.score)<=0)return e.token;return a[a.length-1].token}(e,t);switch(t){case"random":{let t=Math.random()*e.reduce((e,t)=>e+t.probability,0);for(let a of e)if((t-=a.probability)<=0)return a.token;return e[e.length-1].token}case"top-k":{let t=e.slice(0,a),r=Math.random()*t.reduce((e,t)=>e+t.probability,0);for(let e of t)if((r-=e.probability)<=0)return e.token;return t[t.length-1].token}default:return e[0].token}}function p(e,t){let a=o(t),c=a.map(e=>r(e)),d=c.map(e=>n(e,16)),p=a.map((e,t)=>i(t,16)),m=d.map((e,t)=>s(e,p[t])),{heads:f,combinedWeights:b}=l(m),g=u(m[m.length-1],e.vocabulary,42,t);return{...e,originalText:t,tokens:a,tokenIds:c,embeddings:d,positionalEncodings:p,combinedEmbeddings:m,attentionHeads:f,attentionWeights:b,probabilities:g}}a.d(t,{C6:function(){return n},GM:function(){return d},Uq:function(){return s},Y3:function(){return i},m7:function(){return l},mu:function(){return p},qt:function(){return r},ug:function(){return c},wS:function(){return o},zR:function(){return u}})}}]);